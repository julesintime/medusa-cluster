---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: {{.NAMESPACE}}

resources:
  - namespace.yaml
  - secrets.yaml
  - application.yaml
  - ingress.yaml
  - image-automation.yaml

commonLabels:
  app.kubernetes.io/name: {{.APP_NAME}}
  app.kubernetes.io/part-of: {{.NAMESPACE}}-stack
  app.kubernetes.io/managed-by: gitops-automation
  tier: {{.TIER}}
  domain: {{.DOMAIN}}

namePrefix: ""
nameSuffix: ""

# Ensure proper resource ordering
configurations:
  - kustomizeconfig.yaml