apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: archon-platform
  namespace: archon

# Resources in deployment order
resources:
  # Core infrastructure
  - archon-namespace.yaml
  - archon-rbac.yaml
  - archon-infisical-secrets.yaml

  # Build workspace
  - archon-pvc.yaml

  # Build and deployment workflow
  - archon-build-workflow.yaml
  - archon-build-job.yaml

  # Networking
  - archon-services.yaml
  - archon-ingress.yaml

# Labels applied to all resources
commonLabels:
  app.kubernetes.io/part-of: archon-cluster
  app.kubernetes.io/managed-by: argocd

# Annotations applied to all resources
commonAnnotations:
  argocd.argoproj.io/sync-wave: "1"

# Namespace for all resources
namespace: archon
