apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Core infrastructure
  - coder-namespace.yaml
  - coder-rbac.yaml
  
  # Database (PostgreSQL)
  - postgresql-helmrepository.yaml
  - postgresql-helmrelease.yaml
  
  # Networking and proxies
  - proxy-headers.yaml
  - coder-ingress.yaml
  
  # Coder application
  - coder-helmrepository.yaml
  - coder-helmrelease.yaml
  
  # Secrets management (Infisical)
  - coder-infisical-secrets.yaml
  - coder-github-external-auth-infisical-secrets.yaml
  
  # Template automation (GitOps) - FULLY AUTOMATED
  - coder-template-files-configmap.yaml
  - coder-template-init-script-configmap.yaml
  - coder-template-init-job.yaml  # âœ… ENABLED: Follows Gitea pattern for automatic bootstrap