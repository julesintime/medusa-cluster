apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Core infrastructure
  - coder-namespace.yaml
  - coder-rbac.yaml
  
  # Database (PostgreSQL)
  - postgresql-helmrepository.yaml
  - postgresql-helmrelease.yaml
  
  # Networking and proxies
  - proxy-headers.yaml
  - coder-ingress.yaml
  
  # Coder application
  - coder-helmrepository.yaml
  - coder-helmrelease.yaml
  
  # Secrets management (Infisical)
  - coder-infisical-secrets.yaml
  - coder-github-external-auth-infisical-secrets.yaml
  
  # Template automation (GitOps)
  - coder-template-files-configmap.yaml
  - coder-template-init-script-configmap.yaml
  
  # Template automation job - COMMENTED OUT FOR BOOTSTRAP
  # Uncomment after manual API token creation (see API-TOKEN-MANAGEMENT.md)
  # - coder-template-init-job.yaml