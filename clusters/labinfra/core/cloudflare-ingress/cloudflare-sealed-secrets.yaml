---
# Service token secret - needs to be created manually or via sealed-secrets
apiVersion: v1
kind: Secret
metadata:
  name: infisical-service-token
  namespace: cloudflare
type: Opaque
stringData:
  serviceToken: "REPLACE_WITH_ACTUAL_SERVICE_TOKEN"  # TODO: Replace with actual Infisical service token
---
apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: cloudflare-secrets
  namespace: cloudflare
spec:
  hostAPI: https://app.infisical.com/api
  projectId: "REPLACE_WITH_PROJECT_ID"  # TODO: Update with actual project ID from Infisical
  environment: prod
  secretPath: "/cloudflare"
  managedSecretReference:
    secretName: cloudflare-secrets
    secretNamespace: cloudflare
  authentication:
    serviceToken:
      serviceTokenSecretReference:
        secretName: infisical-service-token
        secretNamespace: cloudflare
